#library "c" libc

fopen :: (filename: *u8, mode: *u8) -> rawptr #foreign libc "fopen"
fread :: (ptr: rawptr, size: u64, nmemb: u64, file: rawptr) -> i64 #foreign libc "fread"

main :: () -> void {
    file := fopen("/Users/bretttoomey/Documents/kai/TODO.md", "r")
    if file == nil {
        printf("Dead\n")
    }

    buffer := malloc(1024 * 1024)
    buffer[1024 * 1024] = 0

    count := fread(buffer, 1, 1024 * 1024, file) 

    printf("%d\n", count)
    printf("%s\n", buffer)
}
